<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Page title -->
    <title>TFG</title>

    <!-- Bootstrap CSS and JS-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/custom.css">

    <script src="js/bootstrap.bundle.min.js"></script>
 

    <style>
.card-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0 10px;
}

.card-custom {
    transition: box-shadow .3s;
    position: relative;
    max-width: 300px;
    min-width: 300px;
    height: 450px;
    border-radius: 10px;
    overflow: hidden;
    background-color: white;
    font-family: Arial, sans-serif;
    margin-bottom: 20px;
    margin-left: 10px;
    margin-right: 10px;
}

.card-custom.small {
    transition: box-shadow .3s;
    position: relative;
    max-width: 250px;
    min-width: 250px;
    height: 350px;
    border-radius: 10px;
    overflow: hidden;
    background-color: white;
    font-family: Arial, sans-serif;
    margin-bottom: 20px;
    margin-left: 10px;
    margin-right: 10px;
}

.card-custom.active {
    border: 2px solid blue;
}

.card-custom:hover {
    box-shadow: 0 0px 8px rgba(10, 139, 209, 0.964);
    cursor: pointer;
}

.card-custom-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.card-custom-caption {
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 10px;
    background: rgba(0, 0, 0, 0.5);
    color: white;
    font-size: 1.2em;
    text-align: center;
    -webkit-backdrop-filter: blur(3px);
    backdrop-filter: blur(3px);
}

.modal-body {
    display: flex;
    justify-content: center;
}

.scrolling-wrapper {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding-bottom: 10px;
    scroll-behavior: smooth;
    padding: 10px;
    justify-content: flex-start;
}

.scrolling-wrapper::-webkit-scrollbar {
    display: none;
}

.arrow {
    position: absolute;
    top: 60%;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    border-radius: 20px;
    padding: 10px;
    cursor: pointer;
    z-index: 1;
}

.arrow-left {
    left: 0;
}

.arrow-right {
    right: 0;
}

.icon-container {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    margin-top: 10px;
}

.icon-image {
    box-shadow: 0 0px 8px rgba(10, 139, 209, 0.964);
    width: 30px;
    height: 30px;
    border-radius: 100%;
    overflow: hidden;
    margin-right: 10px;
    object-fit: cover;
}

.icon-caption {
    font-size: 0.9em;
    line-height: 1;
    margin: 0;
}

    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg bg-body-tertiary" style="background-color: #e3f2fd;">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">TFG</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Inicio</a>
                    </li>
                </ul>
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="/login">Iniciar sesión</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/signup">Registrarse</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container position-relative">
        <div class="row">
            <div class="col-12 text-left">
                <h1>Hola, {{ username }}</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-12 text-center">
                <h2 class="my-5">¿Quieres añadir alguna opción?</h2>
            </div>
        </div>

        <button class="arrow arrow-left" onclick="scrollingLeft()">&#10094;</button>
        <button class="arrow arrow-right" onclick="scrollingRight()">&#10095;</button>

        
        <div class="scrolling-wrapper">
          
            
            <div class="card-column" data-bs-target="#colorModal">
                <div class="card-custom" data-bs-toggle="modal" data-bs-target="#colorModal">
                    <img src="image/cards/image_options/color.png" alt="Color" class="card-custom-image">
                    <div class="card-custom-caption">Color</div>
                </div>
               
            </div>
            
           

            <div class="card-column" data-bs-target="#emotionModal">
                <div class="card-custom" data-bs-toggle="modal" data-bs-target="#emotionModal">
                    <img src="image/cards/image_options/emotion.png" alt="Emoción" class="card-custom-image">
                    <div class="card-custom-caption">Emoción</div>
                    
                </div>
                
            </div>

            <div class="card-column" data-bs-target="#sceneModal">
                <div class="card-custom" data-bs-toggle="modal" data-bs-target="#sceneModal">
                    <img src="image/cards/image_options/place.png" alt="Lugar" class="card-custom-image">
                    <div class="card-custom-caption">Lugar</div>
                    
                </div>
                
            </div>
        

           
       
            <div class="card-column" data-bs-target="#styleModal">
                <div class="card-custom" data-bs-toggle="modal" data-bs-target="#styleModal">
                    <img src="image/cards/image_options/style.png" alt="Estilo" class="card-custom-image">
                    <div class="card-custom-caption">Estilo</div>
                </div>
            </div>
            

                <div class="card-column" data-bs-target="#phototypeModal">
                <div class="card-custom" data-bs-toggle="modal" data-bs-target="#phototypeModal">
                    <img src="image/cards/image_options/phototype.png" alt="Tipo de foto" class="card-custom-image">
                    <div class="card-custom-caption">Tipo de foto</div>
                </div>
            </div>

          <div class="card-column" data-bs-target="#lightingModal">
                <div class="card-custom" data-bs-toggle="modal" data-bs-target="#lightingModal">
                    <img src="image/cards/image_options/lighting.png" alt="Iluminación" class="card-custom-image">
                    <div class="card-custom-caption">Iluminación</div>
                </div>
                </div>
        </div>

        <div class="d-grid m-5 col-4 mx-auto">
            <button class="btn btn-primary btn-lg" type="button" onclick="gatherSelectedOptions()">Generar</button>
        
          </div>
    </div>

    <!-- Button trigger modal -->

    <!-- Modal Color -->
    <div class="modal fade" id="colorModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Color</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="scrolling-wrapper">
                        <div class="card-custom small" data-option="pastel">
                           
                                <img src="image/imageColors/pastel.png" alt="Pastel" class="card-custom-image">
                                <div class="card-custom-caption">Pastel</div>
                           
                        </div>
                        <div class="card-custom small" data-option="dark">
                            <img src="image/imageColors/dark.png" alt="Oscuros" class="card-custom-image">
                            <div class="card-custom-caption">Oscuros</div>
                        </div>
                        <div class="card-custom small" data-option="vibrant">
                            <img src="image/imageColors/vibrant.png" alt="Vibrantes" class="card-custom-image">
                            <div class="card-custom-caption">Vibrantes</div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveSelection('colorModal')">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Emocion -->
    <div class="modal fade" id="emotionModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Emoción</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="scrolling-wrapper">
                        <div class="card-custom small" data-option="positive">
                                <img src="image/imageEmotions/positive.png" alt="Positiva" class="card-custom-image">
                                <div class="card-custom-caption">Positiva</div>
                            
                        </div>
                        <div class="card-custom small" data-option="negative">
                            <img src="image/imageEmotions/negative.png" alt="Negativa" class="card-custom-image">
                            <div class="card-custom-caption">Negativa</div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveSelection('emotionModal')">Guardar</button>
                </div>
            </div>
        </div>
    </div>

       <!-- Modal Lugar -->
       <div class="modal fade" id="sceneModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Lugar</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="scrolling-wrapper">
                        <div class="card-custom small" data-option="outside">
                                <img src="image/imagePlaces/outside.png" alt="Exterior" class="card-custom-image">
                                <div class="card-custom-caption">Exterior</div>
                            
                        </div>
                        <div class="card-custom small" data-option="inside">
                            <img src="image/imagePlaces/inside.png" alt="Interior" class="card-custom-image">
                            <div class="card-custom-caption">Interior</div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveSelection('sceneModal')">Guardar</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal Style -->
    <div class="modal fade" id="styleModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Estilo</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="scrolling-wrapper">
                        <div class="card-custom small" data-option="anime">
                          
                                <img src="image/imageStyles/anime.png" alt="Anime" class="card-custom-image">
                                <div class="card-custom-caption">Anime</div>
                            
                        </div>
                        <div class="card-custom small" data-option="pixar">
                            <img src="image/imageStyles/pixar.png" alt="Pixar" class="card-custom-image">
                            <div class="card-custom-caption">Pixar</div>
                        </div>
                        <div class="card-custom small" data-option="cinematic">
                            <img src="image/imageStyles/cinematic.png" alt="Cinemático" class="card-custom-image">
                            <div class="card-custom-caption">Cinemático</div>
                        </div>

                        <div class="card-custom small" data-option="3d render">
                            <img src="image/imageStyles/render.png" alt="Render" class="card-custom-image">
                            <div class="card-custom-caption">3D Render</div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveSelection('styleModal')">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal phototype -->
    <div class="modal fade" id="phototypeModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Tipo de foto</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="scrolling-wrapper">
                        <div class="card-custom small" data-option="close shot">
                        
                                <img src="image/imagePhototypes/close.png" alt="Cercana" class="card-custom-image">
                                <div class="card-custom-caption">Cercana</div>
                            
                        </div>
                        <div class="card-custom small" data-option="far away">
                            <img src="image/imagePhototypes/long.png" alt="Lejana" class="card-custom-image">
                            <div class="card-custom-caption">Lejana</div>
                        </div>


                    </div>
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveSelection('phototypeModal')">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal lighting -->
    <div class="modal fade" id="lightingModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Iluminación</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="scrolling-wrapper">
                        <div class="card-custom small" data-option="day">
                       
                                <img src="image/imageLighting/day.png" alt="Día" class="card-custom-image">
                                <div class="card-custom-caption">Día</div>
                           
                        </div>
                        <div class="card-custom small" data-option="dark">
                            <img src="image/imageLighting/dark.png" alt="Noche" class="card-custom-image">
                            <div class="card-custom-caption">Noche</div>
                        </div>
                        <div class="card-custom small" data-option="afternoon">
                            <img src="image/imageLighting/afternoon.png" alt="Atardecer" class="card-custom-image">
                            <div class="card-custom-caption">Atardecer</div>
                        </div>
                        <div class="card-custom small" data-option="neon">
                            <img src="image/imageLighting/neon.png" alt="Neón" class="card-custom-image">
                            <div class="card-custom-caption">Neón</div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveSelection('lightingModal')">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <script>// Function to toggle selection for a card within a modal
        function toggleSelection(card) {
            const isActive = card.classList.contains('active');
            const modal = card.closest('.modal');
            const modalCards = modal.querySelectorAll('.card-custom');
        
            if (isActive) {
                card.classList.remove('active');
            } else {
                modalCards.forEach(c => c.classList.remove('active'));
                card.classList.add('active');
            }
        }
        
        // Function to save selection for each modal
        function saveSelection(modalId) {
            const modal = document.getElementById(modalId);
            const selectedCard = modal.querySelector('.card-custom.active');
        
            // Find the appropriate card column in the main interface
            const cardColumn = document.querySelector(`.card-column[data-bs-target="#${modalId}"]`);
        
            // Remove any existing icon container for the same modal
            const existingIconContainer = cardColumn.querySelector('.icon-container');
            if (existingIconContainer) {
                cardColumn.removeChild(existingIconContainer);
            }
        
            if (selectedCard) {
                const selectedOption = selectedCard.querySelector('.card-custom-caption').innerText;
                const selectedImageSrc = selectedCard.querySelector('img').src;
        
                // Create a new icon container with the selected option
                const newIconContainer = document.createElement('div');
                newIconContainer.className = 'icon-container';
                newIconContainer.innerHTML = `
                    <img src="${selectedImageSrc}" alt="${selectedOption}" class="icon-image">
                    <p class="icon-caption">${selectedOption}</p>
                `;
        
                // Add the new icon container inside the card column but outside the card-custom
                cardColumn.appendChild(newIconContainer);
            }
        }

        function gatherSelectedOptions() {
    const selectedOptions = {};

    // Iterate over each modal and find the selected option
    document.querySelectorAll('.modal').forEach(modal => {
        const modalId = modal.id;
        const selectedCard = modal.querySelector('.card-custom.active');

        if (selectedCard) {
            const optionName = modal.querySelector('.modal-title').innerText.trim();
            const selectedOption = selectedCard.getAttribute('data-option');

            selectedOptions[optionName] = selectedOption;
        }
    });

    console.log('Selected Options:', selectedOptions);
  
}
        
        // Add event listeners to modal cards
        document.querySelectorAll('.modal .card-custom').forEach(card => {
            card.addEventListener('click', function () {
                toggleSelection(card);
            });
        });
        
        // Add event listener to modal footer buttons to save selection
        document.querySelectorAll('.modal .btn-primary').forEach(button => {
            button.addEventListener('click', function () {
                const modalId = button.closest('.modal').id;
                saveSelection(modalId);
            });
        });


    </script>

</body>

</html>